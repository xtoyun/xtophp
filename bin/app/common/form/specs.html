<div class="form-group" id="{$form.name}_specs"><label class="col-sm-2 control-label">{$form['title']}</label>
    <div class="col-sm-10">
         <div class="block-content" style="margin:0px;padding:0px;border:0px solid #ff6600;margin-top:10px;padding-top:10px;"> 
            <table cellpadding="5" cellspacing=5"">
                <tr>   
                    <td>编号</td>
                    <td>规格</td>
                    <td>价格</td>
                    <td>会员价</td>
                    <td>库存</td>
                </tr>
                <tr v-for="item in items">   
                    <td><input class="form-control" style="width:160px;" v-model="item.title" @change="bind()" /></td>
                     <td><input class="form-control" style="width:100px;" v-model="item.specs" @change="bind()" /></td>
                    <td><input class="form-control" style="width:100px;" v-model="item.price" @change="bind()" /></td>
                    <td><input class="form-control" style="width:100px;" v-model="item.m_price" @change="bind()" /></td>
                    <td><input class="form-control" style="width:100px;" v-model="item.stor" @change="bind()" /></td>
                    <td ><a href="#" @click="del(item.title)">删除</a></td>
                </tr>
                <tr><td>
                    <a href="#" onclick="additem()">添加</a>
                </td></tr>
            </table>
        </div>
        <input type="hidden" value="" name="{$form.name}" id="{$form.name}">
    </div>
</div> 

<script type="text/javascript">
    var {$form.name}_specs = new Vue({
        el: '#{$form.name}_specs',
        data: {
            items: {if condition="$form.value"}{$form.value|raw}{else /} [{title:'默认',specs:'',price:'',m_price:'',stor:''}]{/if},
        },
        methods:{ 
            bind:function(){  
                $("#{$form.name}").val(getString(this.items));
            },
            del(e){
                 for (var i = this.items.length - 1; i >= 0; i--) {
                     if(this.items[i]['title']==e && e!='默认'){
                        this.items.pop(this.items[i])
                     }
                 }
                 this.bind();
            }
        },
        mounted:function(){
            this.bind();
        },
        updated:function(){ 
        }
    })
    function additem(){ 
        {$form.name}_specs.items.push({ title: '',price:'',m_price:'',stor:'' })
    }
    function getString( objarr ){
    　　 var typeNO = objarr.length;
      　var tree = "[";
     　　for (var i = 0 ;i < typeNO ; i++){
            tree += "{";
            tree +='"title":"'+ objarr[i]['title']+'",'; 
            tree +='"specs":"'+ objarr[i]['specs']+'",'; 
            tree +='"price":"'+ objarr[i]['price']+'",'; 
            tree +='"m_price":"'+ objarr[i]['m_price']+'",'; 
            tree +='"stor":"'+ objarr[i]['stor']+'"'; 
      　　　  tree += "}";
      　　　 if(i<typeNO-1){
        　　 　　tree+=",";
     　　　  }
      　 }
      　 tree+="]";
      　 return tree;
    }
</script>